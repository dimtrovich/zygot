!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("php-in-js/modules/array"),require("php-in-js/modules/string"),require("php-in-js/modules/types"),require("php-in-js/modules/url")):"function"==typeof define&&define.amd?define(["exports","php-in-js/modules/array","php-in-js/modules/string","php-in-js/modules/types","php-in-js/modules/url"],t):t((n||self).ZygotVue={},n.array,n.string,n.types,n.url)}(this,function(n,t,r,e,i){function o(){return o=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},o.apply(this,arguments)}var u=/*#__PURE__*/function(){function n(n,t){void 0===n&&(n=!0),this.t=t||("undefined"!=typeof Zygot?Zygot:null==globalThis?void 0:globalThis.Zygot),this.t=o({},this.t,{absolute:n}),this.i=this.t.routes}var u,l,s=n.prototype;return s.current=function(n,t){var r=this.o().name;return n?new RegExp("^"+n.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r):r},s.has=function(n){return Object.keys(this.i).includes(this.u(n))},s.make=function(n,e){if(n=(e=Array.prototype.slice.call(arguments)).shift(),n=this.u(n),e=e.shift(),t.in_array(e,[null,void 0,"undefined","null",""],!0)&&(e=[]),!this.has(n)){if(this.t.defaults.throwOnUnavailable)throw new Error("Zygot error: route '"+n+"' is not in the route list.");return r.trim(this.t.url,"/")}var o=this.l(this.i[n],e);if(!this.t.absolute)return r.rtrim(o,"/");var u=i.parse_url(this.t.url);o=o.includes(u.host)?u.scheme+"://"+r.ltrim(o.replace(u.scheme+"://",""),"/"):this.t.url+o;var l=i.parse_url(o),s=l.port||u.port||this.t.port||80,a=l.query||u.query;return r.trim((l.scheme||u.scheme)+"://"+(l.host||u.host)+(80==s?"":":"+s)+(l.path||u.path)+(a?"?"+a:""),"/")},s.l=function(n,o){t.in_array(o,[null,void 0,"undefined","null",""],!0)||e.is_array(o)||(o=[o]),o.length&&e.is_object(o[0])&&(o=o[0]);var u=r.trim(n.domain||"","/")+"/"+r.trim(n.uri,"/");if(u.includes("{locale}")){var l=null;o&&o.locale&&(l=o.locale,delete o.locale),u=this.h(u,l)}var s=u.match(new RegExp(/\{([A-Za-z_?]+)\}/,"g"));return s&&s.forEach(function(n,l){var a=r.str_replace(["{","}","?"],"",n);if(o[a]||(t.in_array(o[l],[null,void 0,"undefined","null",""],!0)?o.id&&!s.includes("{id}")&&(a="id"):a=l),!n.endsWith("?}")&&0!==o[a]&&e.empty(o[a]))throw new Error("'"+a+"' parameter is required");var f=t.in_array(o[a],[null,void 0,"undefined","null"],!0)?"":o[a];u=r.str_replace(n,i.urlencode(f),u),delete o[a]}),e.is_object(o)&&Object.keys(o).length&&(u+="?"+i.http_build_query(o)),(s=u.match(new RegExp(/\([^)]+\)/,"g")))&&s.forEach(function(n,t){var e=String(o[t]);if(!e.match(new RegExp("^"+n+"$","g")))throw new Error("Zygot error: Invalid parameter type: '"+e+"'.");var i=r.strpos(u,n);u=r.substr_replace(u,e,i,r.strlen(n))}),"/"+r.ltrim(u,"/")},s.h=function(n,e){return!1===r.strpos(n,"{locale}")?n:(null!==e&&(t.in_array(e,this.t.defaults.supportedLocales||[],!0)||(e=null)),null===e&&(e=this.t.defaults.locale||"en"),r.str_replace("{locale}",e,n))},s.u=function(n){var t=this.t.defaults.routeNamePrefix||null;return t&&e.is_string(t)?t+(n=n.replace(RegExp("^"+t,"i"),"")):n},s.v=function(n,t){if(!n.methods.includes("GET"))return!1;t=r.trim(t,"/");var e=n.uri.replace(/:([\w]+)/,function(n){return"([^/]+)"}),i=new RegExp("^"+e+"$","i"),o=t.match(i);return null!=o&&(o.shift(),o)},s.o=function(n){var t=this;n?this.t.absolute&&n.startsWith("/")&&(n=this.p().host+n):n=this.g();var r={},e=Object.entries(this.i).find(function(e){return r=t.v(e[1],n)})||[void 0,void 0];return o({name:e[0]},r,{route:e[1]})},s.p=function(){var n,t,r,e,i,o,u="undefined"!=typeof window?window.location:{},l=u.host,s=u.pathname,a=u.search;return{host:null!=(n=null==(t=this.t.location)?void 0:t.host)?n:void 0===l?"":l,pathname:null!=(r=null==(e=this.t.location)?void 0:e.pathname)?r:void 0===s?"":s,search:null!=(i=null==(o=this.t.location)?void 0:o.search)?i:void 0===a?"":a}},s.g=function(){var n=this.p(),t=n.pathname,r=n.search;return(this.t.absolute?n.host+t:t.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+r},u=n,(l=[{key:"params",get:function(){var n=this.o();return o({},n.params,n.query)}}])&&function(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,"symbol"==typeof(i=function(n,t){if("object"!=typeof n||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e.key))?i:String(i),e)}var i}(u.prototype,l),Object.defineProperty(u,"prototype",{writable:!1}),n}();function l(n,t,r,e){var i=new u(r,e);return n?i.make(n,t):i}n.ZygotVue={install:function(n,t){var r=function(n,r,e,i){return void 0===i&&(i=t),l(n,r,e,i)};n.mixin({methods:{route:r}}),parseInt(n.version)>2&&n.provide("route",r)}},n.route=l});
